const { root, jestConfig} = require('./params')

let extend = {}
if (jestConfig) {
  extend = require(jestConfig)

  console.log('extended config to include', jestConfig)
}

module.exports = {
  collectCoverageFrom: [`${root}/src/{,**/}*.js`],
  setupTestFrameworkScriptFile:
    `${root}/node_modules/picturebook/test/env.js`,
  moduleNameMapper: {
    '^.+[.]css$': 'identity-obj-proxy',
    '^.+[.](md|txt)$': `${root}/node_modules/picturebook/test/stringStub.js`,
  },
  transformIgnorePatterns: [`${root}/node_modules/(?!picturebook)`],
  testMatch: ['**/?(*.)spec.js'],
  ...jestConfig
}
